import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { useState } from "react";
import Accordion from "./Accordion";

<Meta
  title="Accordion"
  component={Accordion}
  argTypes={{
    sections: {
      control: {
        disable: true,
      },
    },
    externallyControlled: {
      control: {
        disable: true,
      },
    },
  }}
/>

export const Template = (args) => <Accordion {...args} />;

### Accordion

This is a [React](https://reactjs.org/) component for the Vanilla [Accordion](https://docs.vanillaframework.io/patterns/accordion/).

The sidebar accordion, used in listing pages or as navigation, can hold multiple navigation items or to be used as a filter for content.

### Props

<ArgsTable of={Accordion} />

### Default

<Canvas>
  <Story
    name="Default"
    args={{
      sections: [
        {
          title: "Advanced topics",
          content: (
            <>
              <p>Charm bundles</p>
              <p>Machine authentication</p>
              <p>Migrating models</p>
              <p>Using storage</p>
              <p>Working with actions</p>
              <p>Working with resources</p>
              <p>Cloud image metadata</p>
              <p>Tools</p>
            </>
          ),
        },
        {
          title: "Networking",
          content: (
            <>
              <p>Working offline</p>
              <p>Fan container networking</p>
              <p>Network spaces</p>
            </>
          ),
        },
        {
          title: "Miscellaneous",
          content: (
            <>
              <p>Juju GUI</p>
              <p>CentOS support</p>
              <p>Collecting Juju metrics</p>
            </>
          ),
        },
      ],
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### External state

The expanded accordion section can be controlled by external state.

<Canvas>
  <Story name="External state">
    {() => {
      const [expandedSection, setExpandedSection] = useState();
      return (
        <Accordion
          expanded={expandedSection}
          externallyControlled
          onExpandedChange={setExpandedSection}
          sections={[
            {
              title: "Advanced topics",
              key: "advanced-topics",
              content: (
                <>
                  <p>Charm bundles</p>
                  <p>Machine authentication</p>
                  <p>Migrating models</p>
                  <p>Using storage</p>
                  <p>Working with actions</p>
                  <p>Working with resources</p>
                  <p>Cloud image metadata</p>
                  <p>Tools</p>
                </>
              ),
            },
            {
              title: "Networking",
              key: "networking",
              content: (
                <>
                  <p>Working offline</p>
                  <p>Fan container networking</p>
                  <p>Network spaces</p>
                </>
              ),
            },
            {
              title: "Miscellaneous",
              key: "miscellaneous",
              content: (
                <>
                  <p>Juju GUI</p>
                  <p>CentOS support</p>
                  <p>Collecting Juju metrics</p>
                </>
              ),
            },
          ]}
        />
      );
    }}
  </Story>
</Canvas>

### Headings

`titleElement` prop can be used to define heading element for section titles.

<Canvas>
  <Story
    name="Headings"
    args={{
      sections: [
        {
          title: "Advanced topics",
          content: (
            <>
              <p>Charm bundles</p>
              <p>Machine authentication</p>
              <p>Migrating models</p>
              <p>Using storage</p>
              <p>Working with actions</p>
              <p>Working with resources</p>
              <p>Cloud image metadata</p>
              <p>Tools</p>
            </>
          ),
        },
        {
          title: "Networking",
          content: (
            <>
              <p>Working offline</p>
              <p>Fan container networking</p>
              <p>Network spaces</p>
            </>
          ),
        },
        {
          title: "Miscellaneous",
          content: (
            <>
              <p>Juju GUI</p>
              <p>CentOS support</p>
              <p>Collecting Juju metrics</p>
            </>
          ),
        },
      ],
      titleElement: "h3",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>

### Custom headings

The `title` prop can be a `ReactNode`, allowing a higher degree of customisation of the section titles.

<Canvas>
  <Story
    name="Custom headings"
    args={{
      sections: [
        {
          title: <>Advanced topics <span className="u-text--muted p-text--small">optional</span></>,
          content: (
            <>
              <p>Charm bundles</p>
              <p>Machine authentication</p>
              <p>Migrating models</p>
              <p>Using storage</p>
              <p>Working with actions</p>
              <p>Working with resources</p>
              <p>Cloud image metadata</p>
              <p>Tools</p>
            </>
          ),
        },
        {
          title: <>Networking <span className="u-text--muted p-text--small">optional</span></>,
          content: (
            <>
              <p>Working offline</p>
              <p>Fan container networking</p>
              <p>Network spaces</p>
            </>
          ),
        },
        {
          title: <>Miscellaneous <span className="u-text--muted p-text--small">optional</span></>,
          content: (
            <>
              <p>Juju GUI</p>
              <p>CentOS support</p>
              <p>Collecting Juju metrics</p>
            </>
          ),
        },
      ],
      titleElement: "h3",
    }}
  >
    {Template.bind({})}
  </Story>
</Canvas>
