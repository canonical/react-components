import { ArgsTable, Canvas, Meta, Story } from "@storybook/addon-docs";
import { useState } from "react";

import ConfirmationButton from "./ConfirmationButton";
import Icon, { ICONS } from "../Icon";

<Meta title="ConfirmationButton" component={ConfirmationButton} />

### ConfirmationButton

`ConfirmationButton` is a specialised version of the [ActionButton](?path=/docs/actionbutton--default-story) component that uses a [ConfirmationModal](?path=/docs/confirmationmodal--default-story) to prompt a confirmation from the user before executing an action.

### Props

<ArgsTable of={ConfirmationButton} />

export const doNothing = () => {};

### Default

<Canvas>
  <Story name="Default">
    <ConfirmationButton
      confirmationModalProps={{
        title: "Confirm delete",
        confirmButtonLabel: "Delete",
        onConfirm: doNothing,
        children:
          <p>
            This will permanently delete the user "Simon".<br/>
            You cannot undo this action.
          </p>,
      }}
    >
      Delete
    </ConfirmationButton>
  </Story>
</Canvas>

### Icon and label

<Canvas>
  <Story name="Icon and label">
    {() => {
      const [isLoading, setLoading] = useState(false);
      const brieflyLoad = () => {
        setLoading(true);
        setTimeout(() => setLoading(false), 2000);
      };
      return (
        <ConfirmationButton
          confirmationModalProps={{
            title: "Confirm delete",
            confirmButtonLabel: "Delete",
            onConfirm: brieflyLoad,
            children:
              <p>
                This will permanently delete the user "Simon".<br/>
                You cannot undo this action.
              </p>,
          }}
          className="has-icon"
          disabled={isLoading}
          loading={isLoading}
          shiftClickEnabled
          showShiftClickHint
        >
          <Icon name={ICONS.delete} />
          <span>Delete</span>
        </ConfirmationButton>
      );
    }}
  </Story>
</Canvas>

### Icon only

<Canvas>
  <Story name="Icon only">
    {() => {
      const [isLoading, setLoading] = useState(false);
      const brieflyLoad = () => {
        setLoading(true);
        setTimeout(() => setLoading(false), 2000);
      };
      return (
        <ConfirmationButton
          confirmationModalProps={{
            title: "Confirm delete",
            confirmButtonLabel: "Delete",
            onConfirm: brieflyLoad,
            children:
              <p>
                This will permanently delete the user "Simon".<br/>
                You cannot undo this action.
              </p>,
          }}
          className="has-icon"
          disabled={isLoading}
          loading={isLoading}
          shiftClickEnabled
          showShiftClickHint
        >
          <Icon name={ICONS.delete} />
        </ConfirmationButton>
      );
    }}
  </Story>
</Canvas>

### Base appearance

<Canvas>
  <Story name="Base appearance">
    {() => {
      const [isLoading, setLoading] = useState(false);
      const brieflyLoad = () => {
        setLoading(true);
        setTimeout(() => setLoading(false), 2000);
      };
      return (
        <ConfirmationButton
          appearance="base"
          confirmationModalProps={{
            title: "Confirm delete",
            confirmButtonLabel: "Delete",
            onConfirm: brieflyLoad,
            children:
              <p>
                This will permanently delete the user "Simon".<br/>
                You cannot undo this action.
              </p>,
          }}
          className="has-icon"
          disabled={isLoading}
          loading={isLoading}
          shiftClickEnabled
          showShiftClickHint
        >
          <Icon name={ICONS.delete} />
        </ConfirmationButton>
      );
    }}
  </Story>
</Canvas>
